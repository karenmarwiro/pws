<?php

use App\Models\ModuleModel;

if (!function_exists('get_active_modules')) {
    function get_active_modules()
    {
        $moduleModel = new ModuleModel();
        return $moduleModel->where('is_active', 1)->findAll();
    }
}

if (!function_exists('get_module_icon')) {
    function get_module_icon($moduleName)
    {
        // Map of common module names to their respective icons
        $iconMap = [
            'Authentication' => 'bi-shield-lock',
            'User Management' => 'bi-people',
            'Content Management' => 'bi-file-earmark-text',
            'E-commerce' => 'bi-cart',
            'Reporting' => 'bi-graph-up',
            'Blog' => 'bi-journal-text',
            'Forum' => 'bi-chat-dots',
            'Calendar' => 'bi-calendar',
            'Gallery' => 'bi-images',
            'Newsletter' => 'bi-envelope',
            'FAQ' => 'bi-question-circle',
            'Testimonials' => 'bi-chat-quote',
            'Portfolio' => 'bi-collection',
            'Team' => 'bi-people-fill',
            'Contact' => 'bi-telephone',
            'RBAC' => 'bi-shield-check',
            'Settings' => 'bi-gear',
            'Dashboard' => 'bi-speedometer2',
            'Modules' => 'bi-puzzle',
            'Logs' => 'bi-journal-text',
            'Backup' => 'bi-hdd-stack',
            'API' => 'bi-plug',
            'Translations' => 'bi-translate',
            'Themes' => 'bi-palette',
            'Media' => 'bi-folder2',
            'Forms' => 'bi-input-cursor-text',
            'SEO' => 'bi-search',
            'Analytics' => 'bi-graph-up-arrow',
            'Backups' => 'bi-hdd-stack',
            'Security' => 'bi-shield-lock',
            'Updates' => 'bi-arrow-repeat',
            'Help' => 'bi-question-circle',
            'Documentation' => 'bi-journal-text',
            'Support' => 'bi-headset',
            'About' => 'bi-info-circle',
            'Profile' => 'bi-person',
            'Messages' => 'bi-chat-left-text',
            'Notifications' => 'bi-bell',
            'Tasks' => 'bi-check2-square',
            'Calendar' => 'bi-calendar3',
            'Files' => 'bi-folder',
            'Download' => 'bi-download',
            'Upload' => 'bi-upload',
            'Trash' => 'bi-trash',
            'Edit' => 'bi-pencil',
            'Delete' => 'bi-trash',
            'Save' => 'bi-save',
            'Cancel' => 'bi-x',
            'Add' => 'bi-plus',
            'Remove' => 'bi-dash',
            'Search' => 'bi-search',
            'Filter' => 'bi-funnel',
            'Sort' => 'bi-arrow-down-up',
            'View' => 'bi-eye',
            'Print' => 'bi-printer',
            'Export' => 'bi-download',
            'Import' => 'bi-upload',
            'Refresh' => 'bi-arrow-repeat',
            'Lock' => 'bi-lock',
            'Unlock' => 'bi-unlock',
            'User' => 'bi-person',
            'Users' => 'bi-people',
            'Group' => 'bi-collection',
            'Groups' => 'bi-collection',
            'Role' => 'bi-person-badge',
            'Roles' => 'bi-people-fill',
            'Permission' => 'bi-shield-shaded',
            'Permissions' => 'bi-shield-shaded',
            'Key' => 'bi-key',
            'Keys' => 'bi-key-fill',
            'Logout' => 'bi-box-arrow-right',
            'Login' => 'bi-box-arrow-in-right',
            'Register' => 'bi-person-plus',
            'Forgot Password' => 'bi-question-circle',
            'Reset Password' => 'bi-arrow-counterclockwise',
            'Email' => 'bi-envelope',
            'Phone' => 'bi-telephone',
            'Address' => 'bi-geo-alt',
            'Map' => 'bi-geo',
            'Location' => 'bi-geo-alt',
            'Home' => 'bi-house',
            'Back' => 'bi-arrow-left',
            'Next' => 'bi-arrow-right',
            'Previous' => 'bi-arrow-left',
            'First' => 'bi-chevron-double-left',
            'Last' => 'bi-chevron-double-right',
            'Up' => 'bi-arrow-up',
            'Down' => 'bi-arrow-down',
            'Left' => 'bi-arrow-left',
            'Right' => 'bi-arrow-right',
            'More' => 'bi-three-dots',
            'Menu' => 'bi-list',
            'Grid' => 'bi-grid',
            'List' => 'bi-list-ul',
            'Table' => 'bi-table',
            'Card' => 'bi-card-text',
            'Gallery' => 'bi-images',
            'Image' => 'bi-image',
            'Images' => 'bi-images',
            'Video' => 'bi-play-circle',
            'Videos' => 'bi-play-circle',
            'Audio' => 'bi-music-note-beamed',
            'Audios' => 'bi-music-note-beamed',
            'File' => 'bi-file-earmark',
            'Files' => 'bi-files',
            'Folder' => 'bi-folder',
            'Folders' => 'bi-folder2',
            'Archive' => 'bi-archive',
            'Download' => 'bi-download',
            'Upload' => 'bi-upload',
            'Cloud' => 'bi-cloud',
            'Cloud Upload' => 'bi-cloud-upload',
            'Cloud Download' => 'bi-cloud-download',
            'Database' => 'bi-database',
            'Server' => 'bi-hdd-rack',
            'CPU' => 'bi-cpu',
            'Memory' => 'bi-memory',
            'Storage' => 'bi-hdd',
            'Network' => 'bi-wifi',
            'Monitor' => 'bi-display',
            'Laptop' => 'bi-laptop',
            'Mobile' => 'bi-phone',
            'Tablet' => 'bi-tablet',
            'Device' => 'bi-device-hdd',
            'Devices' => 'bi-device-hdd',
            'Code' => 'bi-code',
            'Brackets' => 'bi-braces',
            'Terminal' => 'bi-terminal',
            'Bug' => 'bi-bug',
            'Wrench' => 'bi-wrench',
            'Tools' => 'bi-tools',
            'Hammer' => 'bi-hammer',
            'Screwdriver' => 'bi-screwdriver',
            'Wrench Adjustable' => 'bi-wrench-adjustable',
            'Wrench Adjustable Circle' => 'bi-wrench-adjustable-circle',
            'Gear' => 'bi-gear',
            'Gears' => 'bi-gear',
            'Sliders' => 'bi-sliders',
            'Toggles' => 'bi-toggle-on',
            'Toggle On' => 'bi-toggle-on',
            'Toggle Off' => 'bi-toggle-off',
            'Check' => 'bi-check',
            'X' => 'bi-x',
            'Plus' => 'bi-plus',
            'Minus' => 'bi-dash',
            'Multiply' => 'bi-x',
            'Divide' => 'bi-slash',
            'Equal' => 'bi-equals',
            'Not Equal' => 'bi-slash',
            'Greater Than' => 'bi-chevron-right',
            'Less Than' => 'bi-chevron-left',
            'Greater Than Or Equal' => 'bi-chevron-double-right',
            'Less Than Or Equal' => 'bi-chevron-double-left',
            'Percent' => 'bi-percent',
            'Infinity' => 'bi-infinity',
            'Pi' => 'bi-pi',
            'Omega' => 'bi-omega',
            'Sigma' => 'bi-sigma',
            'Sum' => 'bi-sigma',
            'Average' => 'bi-graph-up',
            'Minimize' => 'bi-dash',
            'Maximize' => 'bi-fullscreen',
            'Fullscreen' => 'bi-fullscreen',
            'Fullscreen Exit' => 'bi-fullscreen-exit',
            'Zoom In' => 'bi-zoom-in',
            'Zoom Out' => 'bi-zoom-out',
            'Expand' => 'bi-arrows-angle-expand',
            'Contract' => 'bi-arrows-angle-contract',
            'Arrow Left' => 'bi-arrow-left',
            'Arrow Right' => 'bi-arrow-right',
            'Arrow Up' => 'bi-arrow-up',
            'Arrow Down' => 'bi-arrow-down',
            'Arrow Up Left' => 'bi-arrow-up-left',
            'Arrow Up Right' => 'bi-arrow-up-right',
            'Arrow Down Left' => 'bi-arrow-down-left',
            'Arrow Down Right' => 'bi-arrow-down-right',
            'Arrow Left Circle' => 'bi-arrow-left-circle',
            'Arrow Right Circle' => 'bi-arrow-right-circle',
            'Arrow Up Circle' => 'bi-arrow-up-circle',
            'Arrow Down Circle' => 'bi-arrow-down-circle',
            'Arrow Return Left' => 'bi-arrow-return-left',
            'Arrow Return Right' => 'bi-arrow-return-right',
            'Chevron Left' => 'bi-chevron-left',
            'Chevron Right' => 'bi-chevron-right',
            'Chevron Up' => 'bi-chevron-up',
            'Chevron Down' => 'bi-chevron-down',
            'Chevron Expand' => 'bi-chevron-expand',
            'Chevron Contract' => 'bi-chevron-contract',
            'Caret Left' => 'bi-caret-left',
            'Caret Right' => 'bi-caret-right',
            'Caret Up' => 'bi-caret-up',
            'Caret Down' => 'bi-caret-down',
            'Caret Left Fill' => 'bi-caret-left-fill',
            'Caret Right Fill' => 'bi-caret-right-fill',
            'Caret Up Fill' => 'bi-caret-up-fill',
            'Caret Down Fill' => 'bi-caret-down-fill',
            'Caret Left Square' => 'bi-caret-left-square',
            'Caret Right Square' => 'bi-caret-right-square',
            'Caret Up Square' => 'bi-caret-up-square',
            'Caret Down Square' => 'bi-caret-down-square',
            'Caret Left Square Fill' => 'bi-caret-left-square-fill',
            'Caret Right Square Fill' => 'bi-caret-right-square-fill',
            'Caret Up Square Fill' => 'bi-caret-up-square-fill',
            'Caret Down Square Fill' => 'bi-caret-down-square-fill',
            'Triangle' => 'bi-triangle',
            'Triangle Fill' => 'bi-triangle-fill',
            'Triangle Half' => 'bi-triangle-half',
            'Square' => 'bi-square',
            'Square Fill' => 'bi-square-fill',
            'Square Half' => 'bi-square-half',
            'Circle' => 'bi-circle',
            'Circle Fill' => 'bi-circle-fill',
            'Circle Half' => 'bi-circle-half',
            'Pentagon' => 'bi-pentagon',
            'Pentagon Fill' => 'bi-pentagon-fill',
            'Pentagon Half' => 'bi-pentagon-half',
            'Hexagon' => 'bi-hexagon',
            'Hexagon Fill' => 'bi-hexagon-fill',
            'Hexagon Half' => 'bi-hexagon-half',
            'Octagon' => 'bi-octagon',
            'Octagon Fill' => 'bi-octagon-fill',
            'Octagon Half' => 'bi-octagon-half',
            'Diamond' => 'bi-diamond',
            'Diamond Fill' => 'bi-diamond-fill',
            'Diamond Half' => 'bi-diamond-half',
            'Star' => 'bi-star',
            'Star Fill' => 'bi-star-fill',
            'Star Half' => 'bi-star-half',
            'Heart' => 'bi-heart',
            'Heart Fill' => 'bi-heart-fill',
            'Heart Half' => 'bi-heart-half',
            'Suit Heart' => 'bi-suit-heart',
            'Suit Heart Fill' => 'bi-suit-heart-fill',
            'Suit Spade' => 'bi-suit-spade',
            'Suit Spade Fill' => 'bi-suit-spade-fill',
            'Suit Club' => 'bi-suit-club',
            'Suit Club Fill' => 'bi-suit-club-fill',
            'Suit Diamond' => 'bi-suit-diamond',
            'Suit Diamond Fill' => 'bi-suit-diamond-fill'
        ];

        // Convert module name to a key that matches our icon map
        $moduleKey = str_replace(' ', '', ucwords(str_replace(['-', '_'], ' ', $moduleName)));
        
        // Return the icon if found, otherwise return a default icon
        return $iconMap[$moduleName] ?? 'bi-puzzle';
    }
}
